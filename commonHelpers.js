import{a as u,S as v,b as q,i as p}from"./assets/vendor-b894b36a.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const w=document.querySelector(".js-search-form");document.querySelector(".search-btn");const f=document.querySelector(".js-gallery");w.addEventListener("submit",C);let c=null,a=1;const d=12;u.defaults.baseURL="https://api.unsplash.com";u.defaults.headers.common.Authorization="Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc";const m=new v(".gallery a",{captions:!0,captionsData:"alt",captionDelay:250});function h(t,e=1,o){return u.get("/search/photos",{params:{page:e,query:t,orientation:"portrait",per_page:o}})}const I={lines:17,length:33,width:52,radius:14,scale:1,corners:1,speed:1.6,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#7f9083",fadeColor:"transparent",top:"50%",left:"49%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},l=document.querySelector(".js-backdrop"),g=new q(I),O={root:null,rootMargin:"100px",threshold:1},P=function(t,e){t.forEach(o=>{o.isIntersecting&&(e.unobserve(o.target),M())})},x=new IntersectionObserver(P,O);async function C(t){t.preventDefault(),b();const e=t.currentTarget;c=e.elements["user-search-query"].value.trim(),a=1;try{const{data:{results:o,total_pages:n}}=await h(c,a,d);console.log(o),o.length||p.warning({title:"Caution",message:"Please enter something for search"}),f.innerHTML=y(o),S(n),m.refresh()}catch(o){console.log(o)}finally{e.reset(),L()}}async function M(){a+=1,b();try{const{data:{results:t,total_pages:e}}=await h(c,a,d);f.insertAdjacentHTML("beforeend",y(t)),S(e),m.refresh()}catch(t){console.log(t)}finally{L()}}function y(t){return t.map(({alt_description:e,urls:{small:o,full:n}})=>`   <li class="gallery-item" >
      <a class="gallery-img" href="${n}" target='blank'>
        <img src="${o}" alt="${e}" />
      </a>
    </li>`).join("")}function b(){g.spin(l),l.classList.remove("is-hidden")}function L(){g.stop(),l.classList.add("is-hidden")}function S(t){if(a<t){const e=document.querySelector(".gallery-item:last-child");x.observe(e)}else p.error({title:"Caution",message:"Sorry but it`s the last pictures in our server"})}
//# sourceMappingURL=commonHelpers.js.map
